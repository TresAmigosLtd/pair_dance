<div class="flex flex-row justify-between">
  <h1 class="text-2xl mb-5">Insights</h1>
  <p>
    <.link href={~p"/#{@team.descriptor.slug}"} class="button underline">
      Back
    </.link>
  </p>
</div>

<div>
  <h2 class=" mb-4">Pairing</h2>
  <ul>
    <%= for {member_pairing_stats, index} <- Enum.with_index(@report.pairing_most) do %>
      <li class="list-disc ml-4">
        <%= if index == 0 do %>
          🥇
        <% end %>
        <%= if index == 1 do %>
          🥈
        <% end %>
        <%= if index == 2 do %>
          🥉
        <% end %>
        <%= if index > 2 do %>
          👏
        <% end %>
        <%= member_pairing_stats.member.user.name %> paired <%= member_pairing_stats.count %> times
      </li>
    <% end %>
  </ul>
</div>

<div class="flex flex-column mt-4">
  <div class="flex-1 w-50">
    <h2 class=" mb-4">Task activity</h2>
    <%= for activity <- @report.task_activities do %>
      <div class="pb-4">
        <p>
          <%= activity.task.name %>
        </p>
        <div>
          <%= for member <- activity.involved_members do %>
            <li class="inline-block">
              <div
                data-qa="member-avatar"
                data-user-id={member.user.id}
                class="w-[40px] h-[40px] relative cursor-pointer overflow-hidden text-xs"
              >
                <img
                  alt=""
                  src={member.user.avatar || "/images/avatar.jpeg"}
                  referrerpolicy="no-referrer"
                  class="rounded-full"
                />
              </div>
            </li>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
  <div class="flex-1 w-50">
    <h2 class=" mb-4">Days pairing</h2>
    <.calendar calendar={@calendar} />
  </div>
</div>
