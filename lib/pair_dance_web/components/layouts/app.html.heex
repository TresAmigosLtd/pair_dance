<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="csrf-token" content={get_csrf_token()} />
    <.live_title suffix=" Â· PairDance">
      <%= assigns[:page_title] || "" %>
    </.live_title>
    <link phx-track-static rel="stylesheet" href={~p"/assets/app.css"} />
    <script defer phx-track-static type="text/javascript" src={~p"/assets/app.js"}>
    </script>
  </head>
  <body class="bg-ghost text-gloom antialiased mx-auto max-w-6xl">
    <header class="my-10 flex flex-row justify-between">
      <.link href={~p"/"} class="button">
        <h1 class="text-3xl">Pair Dance ðŸ’ƒ</h1>
      </.link>
      <%= if @current_user do %>
        <div class="">
          <div>
            <div class="dropdown inline-block relative bg-gray-300">
              <button class="text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center">
                <span class="mr-1">Hi, <%= @current_user.name %></span>
                <svg
                  class="fill-current h-4 w-4"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                >
                  <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                </svg>
              </button>

              <ul class="dropdown-menu absolute hidden text-gray-700 bg-gray-200">
                <li>
                  <p>Your Teams</p>
                  <ul>
                    <%= for team_descriptor <- @all_teams do %>
                      <li>
                        <.link
                          class="bg-gray-200 hover:bg-gray-400 block whitespace-no-wrap"
                          href={~p"/#{team_descriptor.slug}"}
                        >
                          <Heroicons.eye mini class="h-5 w-5 inline" />
                          <%= team_descriptor.name %>
                        </.link>
                      </li>
                    <% end %>
                    <li>
                      <.link href={~p"/"} class="hover:bg-gray-400 block whitespace-no-wrap">
                        <Heroicons.plus_circle mini class="h-5 w-5 inline" /> Create team
                      </.link>
                    </li>
                  </ul>
                </li>
                <li>
                  <p>Account</p>
                  <ul>
                    <li>
                      <.link
                        href={~p"/auth/logout"}
                        class="hover:bg-gray-400 block whitespace-no-wrap"
                      >
                        <Heroicons.arrow_right_on_rectangle mini class="h-5 w-5 inline" /> Log out
                      </.link>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </div>
      <% end %>
    </header>
    <main>
      <div class="">
        <.flash kind={:info} title="Success!" flash={@flash} />
        <.flash kind={:error} title="Error!" flash={@flash} />
        <.flash
          id="disconnected"
          kind={:error}
          title="We can't find the internet"
          close={false}
          autoshow={false}
          phx-disconnected={show("#disconnected")}
          phx-connected={hide("#disconnected")}
        >
          Attempting to reconnect
          <Heroicons.arrow_path class="ml-1 w-3 h-3 inline animate-spin" />
        </.flash>
        <%= @inner_content %>
      </div>
    </main>
  </body>
  <footer class="text-center my-20">
    <p class="text-xs">
      <Heroicons.heart mini class="h-3 w-3 inline" />
      Pair.dance <%= DateTime.utc_now().year %>, code on <a
        target="_blank"
        href="https://github.com/TresAmigosLtd/pair_dance"
      >Github</a>.
    </p>
  </footer>
</html>
